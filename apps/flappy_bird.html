<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Mini Flappy üê¶</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #87CEEB;
      font-family: sans-serif;
    }
    #jogo {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
    }
    #passaro {
      position: absolute;
      left: 50px;
      top: 150px;
      font-size: 40px;
    }
    .cano {
      position: absolute;
      width: 60px;
      background: green;
    }
    .cano.topo {
      top: 0;
    }
    .cano.base {
      bottom: 0;
    }
    #mensagem {
      position: absolute;
      top: 40%;
      width: 100%;
      text-align: center;
      font-size: 32px;
      color: white;
    }
  </style>
</head>
<body>
  <div id="jogo">
    <div id="passaro">üê¶</div>
    <div id="mensagem">Toque ou clique para come√ßar</div>
  </div>

  <script>
    const passaro = document.getElementById('passaro');
    const jogo = document.getElementById('jogo');
    const mensagem = document.getElementById('mensagem');

    let gravidade = 0.6;
    let impulso = 0;
    let vivo = false;
    let iniciado = false;
    let canos = [];
    let intervaloCanos;

    function pular() {
      if (!iniciado) {
        iniciarJogo();
        return;
      }
      if (vivo) impulso = -10;
      else reiniciarJogo();
    }

    function criarCano() {
      const espacamento = 140;
      const alturaAleatoria = Math.floor(Math.random() * (window.innerHeight - espacamento - 200)) + 50;

      const canoTopo = document.createElement('div');
      canoTopo.classList.add('cano', 'topo');
      canoTopo.style.height = alturaAleatoria + 'px';
      canoTopo.style.left = '100vw';

      const canoBase = document.createElement('div');
      canoBase.classList.add('cano', 'base');
      canoBase.style.height = (window.innerHeight - alturaAleatoria - espacamento) + 'px';
      canoBase.style.left = '100vw';

      jogo.appendChild(canoTopo);
      jogo.appendChild(canoBase);
      canos.push(canoTopo, canoBase);
    }

    function iniciarJogo() {
      iniciado = true;
      vivo = true;
      mensagem.style.display = 'none';
      intervaloCanos = setInterval(criarCano, 2000);
      loop();
    }

    function loop() {
      if (!vivo) return;

      impulso += gravidade;
      passaro.style.top = (passaro.offsetTop + impulso) + 'px';

      canos.forEach((cano, i) => {
        const novaEsquerda = cano.offsetLeft - 4;
        cano.style.left = novaEsquerda + 'px';

        if (
          novaEsquerda < 90 &&
          novaEsquerda + 60 > 50 &&
          (
            (cano.classList.contains('topo') && passaro.offsetTop < cano.offsetHeight) ||
            (cano.classList.contains('base') && passaro.offsetTop + 40 > window.innerHeight - cano.offsetHeight)
          )
        ) {
          gameOver();
        }

        if (novaEsquerda < -70) {
          cano.remove();
          canos.splice(i, 1);
        }
      });

      if (passaro.offsetTop > window.innerHeight - 40) {
        gameOver();
      }

      requestAnimationFrame(loop);
    }

    function gameOver() {
      vivo = false;
      mensagem.innerHTML = 'Game Over<br>Toque ou clique para reiniciar';
      mensagem.style.display = 'block';
      clearInterval(intervaloCanos);
    }

    function reiniciarJogo() {
      canos.forEach(cano => cano.remove());
      canos = [];
      passaro.style.top = '150px';
      impulso = 0;
      vivo = true;
      mensagem.style.display = 'none';
      intervaloCanos = setInterval(criarCano, 2000);
      loop();
    }

    document.addEventListener('click', pular);
    document.addEventListener('touchstart', pular);
  </script>
</body>
</html>
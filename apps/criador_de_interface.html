<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criador de Interface Gráfico</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: #f5f5f5;
        }
        
        .header {
            background-color: #4CAF50;
            color: white;
            padding: 15px;
            text-align: center;
        }
        
        .container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .sidebar {
            width: 250px;
            background-color: #333;
            color: white;
            padding: 10px;
            overflow-y: auto;
        }
        
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .preview-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: white;
            border: 1px solid #ddd;
            margin: 10px;
        }
        
        .code-area {
            height: 200px;
            padding: 10px;
            background-color: #282c34;
            color: #abb2bf;
            font-family: monospace;
            overflow-y: auto;
            margin: 10px;
        }
        
        .tab-buttons {
            display: flex;
            background-color: #333;
        }
        
        .tab-button {
            padding: 10px 15px;
            background-color: #444;
            color: white;
            border: none;
            cursor: pointer;
            flex: 1;
            text-align: center;
        }
        
        .tab-button.active {
            background-color: #4CAF50;
        }
        
        .tab-content {
            display: none;
            padding: 10px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .element-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .element-btn {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .element-btn:hover {
            background-color: #45a049;
        }
        
        .css-controls {
            margin-top: 15px;
        }
        
        .css-selector {
            margin-bottom: 10px;
        }
        
        .css-property {
            display: flex;
            margin-bottom: 5px;
        }
        
        .css-property select, .css-property input {
            padding: 5px;
            margin-right: 5px;
        }
        
        .css-property button {
            padding: 5px 10px;
            background-color: #f44336;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .add-css-btn {
            padding: 8px 15px;
            background-color: #2196F3;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .element-options {
            margin-top: 10px;
            padding: 10px;
            background-color: #444;
            border-radius: 4px;
        }
        
        .element-tree {
            margin-top: 15px;
            padding: 10px;
            background-color: #444;
            border-radius: 4px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .tree-item {
            padding: 5px;
            margin-left: 15px;
            cursor: pointer;
        }
        
        .tree-item.selected {
            background-color: #4CAF50;
            border-radius: 3px;
        }
        
        .tree-item:hover {
            background-color: #555;
        }
        
        .tree-item .tag {
            color: #4CAF50;
            font-weight: bold;
        }
        
        .tree-item .id {
            color: #2196F3;
        }
        
        .tree-item .class {
            color: #FFC107;
        }
        
        .action-buttons {
            display: flex;
            gap: 5px;
            margin-top: 5px;
        }
        
        .action-btn {
            padding: 3px 6px;
            font-size: 12px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
        
        .move-up {
            background-color: #2196F3;
            color: white;
        }
        
        .move-down {
            background-color: #2196F3;
            color: white;
        }
        
        .delete {
            background-color: #f44336;
            color: white;
        }
        
        .edit {
            background-color: #FFC107;
            color: black;
        }
        
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: 200px;
            }
            
            .element-buttons {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Criador de Interface Gráfico</h1>
    </div>
    
    <div class="container">
        <div class="sidebar">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="openTab('html-tab')">HTML</button>
                <button class="tab-button" onclick="openTab('css-tab')">CSS</button>
            </div>
            
            <div id="html-tab" class="tab-content active">
                <h3>Adicionar Elementos</h3>
                <div class="element-buttons">
                    <button class="element-btn" onclick="addElement('div')">Div</button>
                    <button class="element-btn" onclick="addElement('button')">Button</button>
                    <button class="element-btn" onclick="addElement('p')">Parágrafo</button>
                    <button class="element-btn" onclick="addElement('img')">Imagem</button>
                    <button class="element-btn" onclick="addElement('table')">Tabela</button>
                    <button class="element-btn" onclick="addElement('tbody')">TBody</button>
                    <button class="element-btn" onclick="addElement('tr')">Linha</button>
                    <button class="element-btn" onclick="addElement('td')">Célula</button>
                </div>
                
                <div class="heading-buttons">
                    <h3>Títulos</h3>
                    <div class="element-buttons">
                        <button class="element-btn" onclick="addElement('h1')">H1</button>
                        <button class="element-btn" onclick="addElement('h2')">H2</button>
                        <button class="element-btn" onclick="addElement('h3')">H3</button>
                        <button class="element-btn" onclick="addElement('h4')">H4</button>
                        <button class="element-btn" onclick="addElement('h5')">H5</button>
                        <button class="element-btn" onclick="addElement('h6')">H6</button>
                    </div>
                </div>
                
                <div class="element-options" id="element-options" style="display: none;">
                    <h3>Opções</h3>
                    <div>
                        <label for="element-id">ID:</label>
                        <input type="text" id="element-id" placeholder="ex: meu-id">
                    </div>
                    <div>
                        <label for="element-class">Classe:</label>
                        <input type="text" id="element-class" placeholder="ex: minha-classe">
                    </div>
                    <div>
                        <label for="element-text">Texto:</label>
                        <input type="text" id="element-text" placeholder="Texto do elemento">
                    </div>
                    <div>
                        <label for="element-src" id="src-label" style="display: none;">URL da Imagem:</label>
                        <input type="text" id="element-src" placeholder="ex: imagem.jpg" style="display: none;">
                    </div>
                    <button onclick="confirmElement()">Confirmar</button>
                    <button onclick="cancelElement()">Cancelar</button>
                </div>
                
                <div class="element-tree">
                    <h3>Árvore de Elementos</h3>
                    <div id="element-tree-container"></div>
                </div>
            </div>
            
            <div id="css-tab" class="tab-content">
                <h3>Editor CSS</h3>
                <div class="css-controls">
                    <div class="css-selector">
                        <label for="css-selector-type">Seletor:</label>
                        <select id="css-selector-type">
                            <option value="element">Elemento (div, p, etc)</option>
                            <option value="class">Classe (.minha-classe)</option>
                            <option value="id">ID (#meu-id)</option>
                        </select>
                        <input type="text" id="css-selector-name" placeholder="Nome do seletor">
                    </div>
                    
                    <div id="css-properties-container">
                        <!-- Propriedades CSS serão adicionadas aqui -->
                    </div>
                    
                    <button class="add-css-btn" onclick="addCssProperty()">+ Adicionar Propriedade</button>
                    <button class="add-css-btn" onclick="applyCss()">Aplicar CSS</button>
                </div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="preview-area" id="preview-area">
                <!-- Aqui será renderizado o HTML -->
            </div>
            
            <div class="code-area">
                <h3>Código HTML</h3>
                <pre id="html-code"></pre>
            </div>
            
            <div class="code-area">
                <h3>Código CSS</h3>
                <pre id="css-code"></pre>
            </div>
        </div>
    </div>
    
    <script>
        // Variáveis globais
        let currentElement = null;
        let elements = [];
        let cssRules = [];
        let selectedElementInTree = null;
        
        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            updateElementTree();
            updateCode();
        });
        
        // Funções de abas
        function openTab(tabId) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => button.classList.remove('active'));
            
            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
        }
        
        // Funções de elementos HTML
        function addElement(tagName) {
            document.getElementById('element-options').style.display = 'block';
            document.getElementById('src-label').style.display = 'none';
            document.getElementById('element-src').style.display = 'none';
            
            if (tagName === 'img') {
                document.getElementById('src-label').style.display = 'block';
                document.getElementById('element-src').style.display = 'block';
            }
            
            currentElement = {
                tag: tagName,
                id: '',
                class: '',
                text: '',
                src: '',
                parent: selectedElementInTree ? selectedElementInTree.id : null,
                children: [],
                id: 'element-' + Date.now()
            };
        }
        
        function confirmElement() {
            if (!currentElement) return;
            
            currentElement.id = document.getElementById('element-id').value;
            currentElement.class = document.getElementById('element-class').value;
            currentElement.text = document.getElementById('element-text').value;
            
            if (currentElement.tag === 'img') {
                currentElement.src = document.getElementById('element-src').value;
            }
            
            if (currentElement.parent) {
                const parent = findElementById(currentElement.parent, elements);
                if (parent) {
                    parent.children.push(currentElement);
                }
            } else {
                elements.push(currentElement);
            }
            
            cancelElement();
            renderPreview();
            updateElementTree();
            updateCode();
        }
        
        function cancelElement() {
            currentElement = null;
            document.getElementById('element-options').style.display = 'none';
            document.getElementById('element-id').value = '';
            document.getElementById('element-class').value = '';
            document.getElementById('element-text').value = '';
            document.getElementById('element-src').value = '';
        }
        
        function findElementById(id, elementsArray) {
            for (const element of elementsArray) {
                if (element.id === id) return element;
                if (element.children && element.children.length > 0) {
                    const found = findElementById(id, element.children);
                    if (found) return found;
                }
            }
            return null;
        }
        
        function renderPreview() {
            const previewArea = document.getElementById('preview-area');
            previewArea.innerHTML = '';
            
            function renderElement(element) {
                const el = document.createElement(element.tag);
                
                if (element.id) el.id = element.id;
                if (element.class) el.className = element.class;
                if (element.text && element.tag !== 'img') el.textContent = element.text;
                if (element.tag === 'img' && element.src) el.src = element.src;
                
                if (element.children && element.children.length > 0) {
                    element.children.forEach(child => {
                        el.appendChild(renderElement(child));
                    });
                }
                
                return el;
            }
            
            elements.forEach(element => {
                previewArea.appendChild(renderElement(element));
            });
        }
        
        function updateElementTree() {
            const container = document.getElementById('element-tree-container');
            container.innerHTML = '';
            
            function createTreeItem(element, level = 0) {
                const item = document.createElement('div');
                item.className = 'tree-item';
                item.dataset.id = element.id;
                
                // Adiciona recuo baseado no nível
                item.style.marginLeft = (level * 15) + 'px';
                
                // Cria a representação do elemento
                let elementRep = `<span class="tag">&lt;${element.tag}&gt;</span>`;
                if (element.id) elementRep += ` <span class="id">#${element.id}</span>`;
                if (element.class) elementRep += ` <span class="class">.${element.class}</span>`;
                if (element.text && element.text.length > 0) elementRep += ` - "${element.text.substring(0, 15)}${element.text.length > 15 ? '...' : ''}"`;
                
                item.innerHTML = elementRep;
                
                // Adiciona botões de ação
                const actions = document.createElement('div');
                actions.className = 'action-buttons';
                
                const editBtn = document.createElement('button');
                editBtn.className = 'action-btn edit';
                editBtn.textContent = 'Editar';
                editBtn.onclick = (e) => {
                    e.stopPropagation();
                    editElement(element.id);
                };
                
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'action-btn delete';
                deleteBtn.textContent = 'Excluir';
                deleteBtn.onclick = (e) => {
                    e.stopPropagation();
                    deleteElement(element.id);
                };
                
                actions.appendChild(editBtn);
                actions.appendChild(deleteBtn);
                
                item.appendChild(actions);
                
                // Adiciona evento de clique para seleção
                item.onclick = (e) => {
                    if (e.target.tagName === 'BUTTON') return;
                    
                    const items = document.querySelectorAll('.tree-item');
                    items.forEach(i => i.classList.remove('selected'));
                    item.classList.add('selected');
                    selectedElementInTree = element;
                };
                
                // Adiciona filhos recursivamente
                if (element.children && element.children.length > 0) {
                    element.children.forEach(child => {
                        item.appendChild(createTreeItem(child, level + 1));
                    });
                }
                
                return item;
            }
            
            elements.forEach(element => {
                container.appendChild(createTreeItem(element));
            });
        }
        
        function editElement(id) {
            const element = findElementById(id, elements);
            if (!element) return;
            
            document.getElementById('element-options').style.display = 'block';
            document.getElementById('src-label').style.display = element.tag === 'img' ? 'block' : 'none';
            document.getElementById('element-src').style.display = element.tag === 'img' ? 'block' : 'none';
            
            document.getElementById('element-id').value = element.id || '';
            document.getElementById('element-class').value = element.class || '';
            document.getElementById('element-text').value = element.text || '';
            document.getElementById('element-src').value = element.src || '';
            
            currentElement = element;
        }
        
        function deleteElement(id) {
            function removeFromArray(arr, id) {
                const index = arr.findIndex(el => el.id === id);
                if (index !== -1) {
                    arr.splice(index, 1);
                    return true;
                }
                
                for (const element of arr) {
                    if (element.children && element.children.length > 0) {
                        if (removeFromArray(element.children, id)) {
                            return true;
                        }
                    }
                }
                
                return false;
            }
            
            if (removeFromArray(elements, id)) {
                renderPreview();
                updateElementTree();
                updateCode();
            }
        }
        
        // Funções CSS
        function addCssProperty() {
            const container = document.getElementById('css-properties-container');
            
            const propertyDiv = document.createElement('div');
            propertyDiv.className = 'css-property';
            
            const propertySelect = document.createElement('select');
            propertySelect.innerHTML = `
                <option value="color">color</option>
                <option value="background-color">background-color</option>
                <option value="font-size">font-size</option>
                <option value="width">width</option>
                <option value="height">height</option>
                <option value="margin">margin</option>
                <option value="padding">padding</option>
                <option value="border">border</option>
                <option value="display">display</option>
                <option value="flex-direction">flex-direction</option>
                <option value="justify-content">justify-content</option>
                <option value="align-items">align-items</option>
<option value="border-radius">border-radius</option>
<option value=font-family">font-family</option>
            `;
            
            const valueInput = document.createElement('input');
            valueInput.type = 'text';
            valueInput.placeholder = 'valor';
            
            const removeBtn = document.createElement('button');
            removeBtn.textContent = 'Remover';
            removeBtn.onclick = function() {
                container.removeChild(propertyDiv);
            };
            
            propertyDiv.appendChild(propertySelect);
            propertyDiv.appendChild(valueInput);
            propertyDiv.appendChild(removeBtn);
            
            container.appendChild(propertyDiv);
        }
        
        function applyCss() {
            const selectorType = document.getElementById('css-selector-type').value;
            let selectorName = document.getElementById('css-selector-name').value.trim();
            
            if (!selectorName) {
                alert('Por favor, insira um nome para o seletor');
                return;
            }
            
            let fullSelector;
            switch (selectorType) {
                case 'class':
                    fullSelector = '.' + selectorName;
                    break;
                case 'id':
                    fullSelector = '#' + selectorName;
                    break;
                default:
                    fullSelector = selectorName;
            }
            
            const properties = [];
            const propertyDivs = document.querySelectorAll('#css-properties-container .css-property');
            
            propertyDivs.forEach(div => {
                const property = div.querySelector('select').value;
                const value = div.querySelector('input').value.trim();
                
                if (value) {
                    properties.push({
                        property,
                        value
                    });
                }
            });
            
            if (properties.length === 0) {
                alert('Adicione pelo menos uma propriedade CSS');
                return;
            }
            
            // Verifica se já existe uma regra para este seletor
            const existingRuleIndex = cssRules.findIndex(rule => rule.selector === fullSelector);
            
            if (existingRuleIndex !== -1) {
                // Atualiza a regra existente
                cssRules[existingRuleIndex].properties = properties;
            } else {
                // Adiciona nova regra
                cssRules.push({
                    selector: fullSelector,
                    properties
                });
            }
            
            applyCssToPreview();
            updateCode();
            document.getElementById('css-properties-container').innerHTML = '';
            document.getElementById('css-selector-name').value = '';
        }
        
        function applyCssToPreview() {
            const styleElement = document.createElement('style');
            styleElement.id = 'dynamic-styles';
            
            let cssText = '';
            cssRules.forEach(rule => {
                cssText += `${rule.selector} {`;
                rule.properties.forEach(prop => {
                    cssText += `${prop.property}: ${prop.value};`;
                });
                cssText += '}';
            });
            
            styleElement.textContent = cssText;
            
            // Remove estilos antigos se existirem
            const oldStyle = document.getElementById('dynamic-styles');
            if (oldStyle) {
                document.head.removeChild(oldStyle);
            }
            
            document.head.appendChild(styleElement);
        }
        
        // Atualiza os códigos HTML e CSS exibidos
        function updateCode() {
            // HTML
            function generateHtmlCode(elementsArray, indent = 0) {
                let html = '';
                const spaces = ' '.repeat(indent * 2);
                
                elementsArray.forEach(element => {
                    const attrs = [];
                    if (element.id) attrs.push(`id="${element.id}"`);
                    if (element.class) attrs.push(`class="${element.class}"`);
                    if (element.tag === 'img' && element.src) attrs.push(`src="${element.src}"`);
                    
                    const attrsStr = attrs.length > 0 ? ' ' + attrs.join(' ') : '';
                    
                    if (element.children && element.children.length > 0) {
                        // Elemento com conteúdo e filhos
                        html += `${spaces}<${element.tag}${attrsStr}>\n`;
                        if (element.text) {
                            html += `${spaces}  ${element.text}\n`;
                        }
                        html += generateHtmlCode(element.children, indent + 1);
                        html += `${spaces}</${element.tag}>\n`;
                    } else if (element.tag === 'img') {
                        // Elemento auto-fechado (img)
                        html += `${spaces}<${element.tag}${attrsStr} />\n`;
                    } else if (element.text) {
                        // Elemento com apenas texto
                        html += `${spaces}<${element.tag}${attrsStr}>${element.text}</${element.tag}>\n`;
                    } else {
                        // Elemento vazio
                        html += `${spaces}<${element.tag}${attrsStr}></${element.tag}>\n`;
                    }
                });
                
                return html;
            }
            
            document.getElementById('html-code').textContent = generateHtmlCode(elements);
            
            // CSS
            let css = '';
            cssRules.forEach(rule => {
                css += `${rule.selector} {\n`;
                rule.properties.forEach(prop => {
                    css += `  ${prop.property}: ${prop.value};\n`;
                });
                css += '}\n\n';
            });
            
            document.getElementById('css-code').textContent = css;
        }
    </script>
</body>
</html>
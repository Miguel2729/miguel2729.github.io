<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email LAN P2P</title>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
        }
        .email-app {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        header {
            background: #0078d4;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .login-box {
            display: flex;
            gap: 10px;
        }
        .login-box input, .compose-form input, .compose-form textarea {
            padding: 8px;
            border: none;
            border-radius: 4px;
        }
        button {
            padding: 8px 15px;
            background: #005a9e;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #004080;
        }
        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
        .main-container {
            display: flex;
            flex: 1;
        }
        .sidebar {
            width: 200px;
            background: #f0f0f0;
            padding: 15px;
            border-right: 1px solid #ddd;
        }
        .email-list {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
        }
        .email-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 4px;
            cursor: pointer;
            border-left: 4px solid transparent;
        }
        .email-item.unread {
            border-left: 4px solid #0078d4;
            font-weight: bold;
        }
        .email-item:hover {
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .email-view {
            flex: 1;
            padding: 15px;
            background: white;
            border-radius: 4px;
            margin-left: 15px;
            display: none;
        }
        .compose-form {
            display: none;
            flex-direction: column;
            gap: 10px;
            padding: 15px;
            background: white;
            border-radius: 4px;
            margin: 15px;
        }
        .compose-form textarea {
            min-height: 200px;
            resize: vertical;
        }
        .folder {
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
        }
        .folder:hover, .folder.active {
            background: #ddd;
        }
        .user-status {
            font-size: 0.9em;
            color: #e0e0e0;
        }
        .connection-status {
            font-size: 0.8em;
            margin-left: 10px;
            padding: 2px 8px;
            border-radius: 10px;
            background: #28a745;
        }
        .connection-status.offline {
            background: #dc3545;
        }
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #0078d4;
            color: white;
            padding: 10px 15px;
            border-radius: 4px;
            display: none;
            z-index: 1000;
        }
        .online-users {
            margin-top: 20px;
            font-size: 0.9em;
        }
        .online-user {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }
        .online-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #28a745;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="email-app">
        <header>
            <div>
                <h1>Email LAN P2P</h1>
                <div class="user-status" id="user-status">N√£o conectado</div>
            </div>
            <div class="login-box" id="login-box">
                <input type="text" id="email-input" placeholder="seu@email.local">
                <button id="login-btn">Entrar</button>
            </div>
            <div id="logout-box" style="display: none;">
                <span id="connection-status" class="connection-status">Conectado</span>
                <button id="logout-btn">Sair</button>
            </div>
        </header>

        <div class="main-container">
            <aside class="sidebar">
                <button id="compose-btn">‚úèÔ∏è Novo Email</button>
                <div style="margin-top: 20px;">
                    <div class="folder active" data-folder="inbox">üì• Caixa de Entrada</div>
                    <div class="folder" data-folder="sent">üì§ Enviados</div>
                    <div class="folder" data-folder="drafts">üìù Rascunhos</div>
                </div>
                
                <div class="online-users" id="online-users" style="display: none;">
                    <h4>Usu√°rios Online</h4>
                    <div id="online-users-list"></div>
                </div>
            </aside>

            <div style="flex: 1; display: flex; flex-direction: column;">
                <div class="compose-form" id="compose-form">
                    <input type="text" id="compose-to" placeholder="Para (ex: amigo@local)">
                    <input type="text" id="compose-subject" placeholder="Assunto">
                    <textarea id="compose-body" placeholder="Escreva sua mensagem aqui..."></textarea>
                    <div style="display: flex; gap: 10px;">
                        <button id="send-btn">Enviar</button>
                        <button id="save-draft-btn">Salvar Rascunho</button>
                        <button id="cancel-compose-btn">Cancelar</button>
                    </div>
                </div>

                <main class="email-list" id="email-list">
                    <div class="no-emails">Fa√ßa login para ver seus emails</div>
                </main>
            </div>

            <div class="email-view" id="email-view">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h2 id="view-subject"></h2>
                    <button id="delete-email-btn">üóëÔ∏è Excluir</button>
                </div>
                <div style="margin: 15px 0; border-bottom: 1px solid #eee; padding-bottom: 10px;">
                    <div><strong>De:</strong> <span id="view-from"></span></div>
                    <div><strong>Para:</strong> <span id="view-to"></span></div>
                    <div><strong>Data:</strong> <span id="view-date"></span></div>
                </div>
                <div id="view-body" style="white-space: pre-wrap;"></div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        // Sistema P2P de Email
        class P2PEmailSystem {
            constructor() {
                this.peer = null;
                this.connections = new Map(); // email -> connection
                this.currentUser = null;
                this.onlineUsers = new Set();
            }

            async init(userEmail) {
                this.currentUser = userEmail;
                
                try {
                    this.peer = new Peer(userEmail, {
                        host: '0.peerjs.com',
                        port: 443,
                        path: '/',
                        debug: 2,
                        config: {
                            iceServers: [
                                { urls: 'stun:stun.l.google.com:19302' },
                                { urls: 'stun:global.stun.twilio.com:3478' }
                            ]
                        }
                    });

                    return new Promise((resolve, reject) => {
                        this.peer.on('open', (id) => {
                            console.log('Conectado P2P com ID:', id);
                            this.setupPeerListeners();
                            this.updateConnectionStatus(true);
                            resolve(true);
                        });

                        this.peer.on('error', (err) => {
                            console.error('Erro P2P:', err);
                            this.updateConnectionStatus(false);
                            reject(err);
                        });

                        setTimeout(() => {
                            if (!this.peer.disconnected) reject(new Error('Timeout'));
                        }, 10000);
                    });
                } catch (error) {
                    console.error('Erro ao inicializar P2P:', error);
                    this.updateConnectionStatus(false);
                    return false;
                }
            }

            setupPeerListeners() {
                this.peer.on('connection', (conn) => {
                    console.log('Nova conex√£o recebida de:', conn.peer);
                    
                    conn.on('open', () => {
                        this.connections.set(conn.peer, conn);
                        this.onlineUsers.add(conn.peer);
                        this.updateOnlineUsersList();
                    });

                    conn.on('data', (data) => {
                        this.handleIncomingData(data, conn.peer);
                    });

                    conn.on('close', () => {
                        this.connections.delete(conn.peer);
                        this.onlineUsers.delete(conn.peer);
                        this.updateOnlineUsersList();
                    });

                    conn.on('error', (err) => {
                        console.error('Erro na conex√£o:', err);
                    });
                });

                // Tenta reconectar periodicamente a usu√°rios conhecidos
                setInterval(() => this.reconnectToKnownUsers(), 30000);
            }

            async connectToUser(userEmail) {
                if (this.connections.has(userEmail) || userEmail === this.currentUser) {
                    return;
                }

                try {
                    const conn = this.peer.connect(userEmail, {
                        reliable: true
                    });

                    conn.on('open', () => {
                        console.log('Conectado com:', userEmail);
                        this.connections.set(userEmail, conn);
                        this.onlineUsers.add(userEmail);
                        this.updateOnlineUsersList();

                        // Envia pending emails
                        this.sendPendingEmailsTo(userEmail);
                    });

                    conn.on('data', (data) => {
                        this.handleIncomingData(data, userEmail);
                    });

                    conn.on('close', () => {
                        this.connections.delete(userEmail);
                        this.onlineUsers.delete(userEmail);
                        this.updateOnlineUsersList();
                    });

                    conn.on('error', (err) => {
                        console.error('Erro na conex√£o com', userEmail, err);
                    });

                } catch (error) {
                    console.error('Erro ao conectar com', userEmail, error);
                }
            }

            handleIncomingData(data, fromUser) {
                console.log('Dados recebidos de', fromUser, data);
                
                switch (data.type) {
                    case 'new_email':
                        this.handleNewEmail(data.email);
                        break;
                    case 'ping':
                        // Responde ao ping
                        if (this.connections.has(fromUser)) {
                            this.connections.get(fromUser).send({ type: 'pong' });
                        }
                        break;
                    case 'user_online':
                        this.onlineUsers.add(fromUser);
                        this.updateOnlineUsersList();
                        break;
                }
            }

            handleNewEmail(emailData) {
                if (emailData.to !== this.currentUser) return;

                const email = {
                    ...emailData,
                    id: Date.now().toString(),
                    date: new Date().toISOString(),
                    unread: true,
                    isDraft: false
                };

                // Salva o email
                const emails = EmailDB.getEmails();
                emails.push(email);
                EmailDB.saveEmails(emails);

                // Notifica o usu√°rio
                showNotification(`üìß Novo email de ${email.from}`);
                
                // Atualiza a lista se estiver na caixa de entrada
                if (currentFolder === 'inbox') {
                    loadEmails();
                }
            }

            async sendEmail(emailData) {
                const recipient = emailData.to;

                // Salva localmente primeiro
                EmailDB.addEmail(emailData);

                // Tenta enviar via P2P se o usu√°rio estiver online
                if (this.connections.has(recipient)) {
                    try {
                        this.connections.get(recipient).send({
                            type: 'new_email',
                            email: emailData
                        });
                        return { success: true, online: true };
                    } catch (error) {
                        console.error('Erro ao enviar email:', error);
                        this.storePendingEmail(emailData);
                        return { success: false, online: false, error };
                    }
                } else {
                    // Usu√°rio offline, armazena para enviar depois
                    this.storePendingEmail(emailData);
                    return { success: true, online: false };
                }
            }

            storePendingEmail(emailData) {
                const pending = JSON.parse(localStorage.getItem('pending_emails') || '[]');
                pending.push({
                    ...emailData,
                    timestamp: Date.now(),
                    attempts: 0
                });
                localStorage.setItem('pending_emails', JSON.stringify(pending));
            }

            async sendPendingEmailsTo(userEmail) {
                const pending = JSON.parse(localStorage.getItem('pending_emails') || '[]');
                const remaining = [];
                let sentCount = 0;

                for (const pendingEmail of pending) {
                    if (pendingEmail.to === userEmail && pendingEmail.attempts < 5) {
                        try {
                            if (this.connections.has(userEmail)) {
                                this.connections.get(userEmail).send({
                                    type: 'new_email',
                                    email: pendingEmail
                                });
                                sentCount++;
                            } else {
                                pendingEmail.attempts++;
                                remaining.push(pendingEmail);
                            }
                        } catch (error) {
                            pendingEmail.attempts++;
                            remaining.push(pendingEmail);
                        }
                    } else {
                        remaining.push(pendingEmail);
                    }
                }

                localStorage.setItem('pending_emails', JSON.stringify(remaining));
                
                if (sentCount > 0) {
                    showNotification(`${sentCount} emails pendentes enviados para ${userEmail}`);
                }
            }

            reconnectToKnownUsers() {
                const allEmails = EmailDB.getEmails();
                const knownUsers = new Set();
                
                // Coleta todos os usu√°rios com quem j√° trocou emails
                allEmails.forEach(email => {
                    if (email.from && email.from !== this.currentUser) knownUsers.add(email.from);
                    if (email.to && email.to !== this.currentUser) knownUsers.add(email.to);
                });

                knownUsers.forEach(user => {
                    if (!this.connections.has(user)) {
                        this.connectToUser(user);
                    }
                });
            }

            updateConnectionStatus(connected) {
                const statusElement = document.getElementById('connection-status');
                if (statusElement) {
                    statusElement.textContent = connected ? 'Conectado' : 'Offline';
                    statusElement.classList.toggle('offline', !connected);
                }
            }

            updateOnlineUsersList() {
                const onlineList = document.getElementById('online-users-list');
                const onlineContainer = document.getElementById('online-users');
                
                if (!onlineList || !currentUser) return;

                if (this.onlineUsers.size > 0) {
                    onlineContainer.style.display = 'block';
                    onlineList.innerHTML = '';
                    
                    this.onlineUsers.forEach(user => {
                        if (user !== currentUser) {
                            const userElement = document.createElement('div');
                            userElement.className = 'online-user';
                            userElement.innerHTML = `
                                <div class="online-dot"></div>
                                <span>${user}</span>
                            `;
                            onlineList.appendChild(userElement);
                        }
                    });
                } else {
                    onlineContainer.style.display = 'none';
                }
            }

            disconnect() {
                if (this.peer) {
                    this.peer.destroy();
                }
                this.connections.clear();
                this.onlineUsers.clear();
                this.updateConnectionStatus(false);
            }
        }

        // Inst√¢ncia global do sistema P2P
        const p2pSystem = new P2PEmailSystem();

        // Banco de dados usando localStorage
        const EmailDB = {
            getEmails: () => {
                const emails = localStorage.getItem('lan-emails');
                return emails ? JSON.parse(emails) : [];
            },
            saveEmails: (emails) => {
                localStorage.setItem('lan-emails', JSON.stringify(emails));
            },
            addEmail: (email) => {
                const emails = EmailDB.getEmails();
                emails.push(email);
                EmailDB.saveEmails(emails);
                return email;
            },
            deleteEmail: (id) => {
                const emails = EmailDB.getEmails();
                const updated = emails.filter(e => e.id !== id);
                EmailDB.saveEmails(updated);
                return updated;
            },
            markAsRead: (id) => {
                const emails = EmailDB.getEmails();
                const updated = emails.map(e => {
                    if (e.id === id && e.to === currentUser && e.unread) {
                        return {...e, unread: false};
                    }
                    return e;
                });
                EmailDB.saveEmails(updated);
                return updated;
            }
        };

        // Estado do aplicativo
        let currentUser = null;
        let currentFolder = 'inbox';

        // Elementos da UI
        const emailInput = document.getElementById('email-input');
        const loginBtn = document.getElementById('login-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const loginBox = document.getElementById('login-box');
        const logoutBox = document.getElementById('logout-box');
        const userStatus = document.getElementById('user-status');
        const composeBtn = document.getElementById('compose-btn');
        const composeForm = document.getElementById('compose-form');
        const sendBtn = document.getElementById('send-btn');
        const saveDraftBtn = document.getElementById('save-draft-btn');
        const cancelComposeBtn = document.getElementById('cancel-compose-btn');
        const composeTo = document.getElementById('compose-to');
        const composeSubject = document.getElementById('compose-subject');
        const composeBody = document.getElementById('compose-body');
        const emailList = document.getElementById('email-list');
        const emailView = document.getElementById('email-view');
        const viewSubject = document.getElementById('view-subject');
        const viewFrom = document.getElementById('view-from');
        const viewTo = document.getElementById('view-to');
        const viewDate = document.getElementById('view-date');
        const viewBody = document.getElementById('view-body');
        const deleteEmailBtn = document.getElementById('delete-email-btn');
        const folders = document.querySelectorAll('.folder');
        const notification = document.getElementById('notification');

        // Fun√ß√£o de login
        loginBtn.addEventListener('click', async () => {
            const email = emailInput.value.trim().toLowerCase();
            if (validateEmail(email)) {
                loginBtn.disabled = true;
                loginBtn.textContent = 'Conectando...';
                
                try {
                    const connected = await p2pSystem.init(email);
                    
                    if (connected) {
                        currentUser = email;
                        userStatus.textContent = `Conectado como: ${email}`;
                        loginBox.style.display = 'none';
                        logoutBox.style.display = 'block';
                        loadEmails();
                        showNotification('Sistema P2P conectado!');
                    } else {
                        throw new Error('Falha na conex√£o P2P');
                    }
                } catch (error) {
                    alert('Erro ao conectar. Verifique sua conex√£o e tente novamente.');
                    console.error('Erro no login:', error);
                } finally {
                    loginBtn.disabled = false;
                    loginBtn.textContent = 'Entrar';
                }
            } else {
                alert('Por favor, insira um email v√°lido (formato: usuario@dominio.local)');
            }
        });

        // Fun√ß√£o de logout
        logoutBtn.addEventListener('click', () => {
            currentUser = null;
            userStatus.textContent = 'N√£o conectado';
            loginBox.style.display = 'flex';
            logoutBox.style.display = 'none';
            
            p2pSystem.disconnect();
            
            emailList.innerHTML = '<div class="no-emails">Fa√ßa login para ver seus emails</div>';
            emailView.style.display = 'none';
            composeForm.style.display = 'none';
            
            document.getElementById('online-users').style.display = 'none';
        });

        // Validar email
        function validateEmail(email) {
            return email.includes('@') && email.length > 3;
        }

        // Mostrar notifica√ß√£o
        function showNotification(message) {
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 5000);
        }

        // Carregar emails
        function loadEmails() {
            if (!currentUser) return;
            
            emailList.innerHTML = '';
            const allEmails = EmailDB.getEmails();
            
            let userEmails = [];
            if (currentFolder === 'inbox') {
                userEmails = allEmails.filter(email => email.to === currentUser && !email.isDraft);
            } else if (currentFolder === 'sent') {
                userEmails = allEmails.filter(email => email.from === currentUser && !email.isDraft);
            } else if (currentFolder === 'drafts') {
                userEmails = allEmails.filter(email => email.from === currentUser && email.isDraft);
            }
            
            userEmails.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (userEmails.length === 0) {
                emailList.innerHTML = `<div class="no-emails">Nenhum email na pasta ${getFolderName(currentFolder)}</div>`;
                return;
            }
            
            userEmails.forEach(email => {
                const emailElement = document.createElement('div');
                emailElement.className = `email-item ${email.to === currentUser && email.unread ? 'unread' : ''}`;
                emailElement.dataset.id = email.id;
                emailElement.innerHTML = `
                    <h3>${email.subject || '(Sem assunto)'}</h3>
                    <p>${currentFolder === 'inbox' ? 'De: ' + email.from : 'Para: ' + email.to}</p>
                    <p>${formatDate(email.date)}</p>
                    <p>${email.body.substring(0, 100)}${email.body.length > 100 ? '...' : ''}</p>
                `;
                emailElement.addEventListener('click', () => viewEmail(email.id));
                emailList.appendChild(emailElement);
            });
        }

        // Visualizar email
        function viewEmail(id) {
            const email = EmailDB.getEmails().find(e => e.id === id);
            if (!email) return;
            
            // Marcar como lido se for destinado ao usu√°rio atual
            if (email.to === currentUser && email.unread) {
                EmailDB.markAsRead(id);
                loadEmails(); // Atualiza a lista para remover o estilo "n√£o lido"
            }
            
            viewSubject.textContent = email.subject || '(Sem assunto)';
            viewFrom.textContent = email.from;
            viewTo.textContent = email.to;
            viewDate.textContent = formatDate(email.date, true);
            viewBody.textContent = email.body;
            
            emailView.style.display = 'block';
            emailList.style.display = 'none';
            
            // Configurar bot√£o de exclus√£o
            deleteEmailBtn.onclick = () => {
                if (confirm('Tem certeza que deseja excluir este email?')) {
                    EmailDB.deleteEmail(id);
                    emailView.style.display = 'none';
                    emailList.style.display = 'block';
                    loadEmails();
                }
            };
        }

        // Formatar data
        function formatDate(dateString, full = false) {
            const date = new Date(dateString);
            if (full) {
                return date.toLocaleString();
            }
            return date.toLocaleDateString();
        }

        // Nome da pasta
        function getFolderName(folder) {
            const names = {
                'inbox': 'Caixa de Entrada',
                'sent': 'Enviados',
                'drafts': 'Rascunhos'
            };
            return names[folder] || folder;
        }

        // Navega√ß√£o entre pastas
        folders.forEach(folder => {
            folder.addEventListener('click', () => {
                folders.forEach(f => f.classList.remove('active'));
                folder.classList.add('active');
                currentFolder = folder.dataset.folder;
                loadEmails();
                emailView.style.display = 'none';
                emailList.style.display = 'block';
            });
        });

        // Novo email
        composeBtn.addEventListener('click', () => {
            composeTo.value = '';
            composeSubject.value = '';
            composeBody.value = '';
            composeForm.style.display = 'flex';
            emailList.style.display = 'none';
            emailView.style.display = 'none';
        });

        // Cancelar composi√ß√£o
        cancelComposeBtn.addEventListener('click', () => {
            composeForm.style.display = 'none';
            emailList.style.display = 'block';
        });

        // Enviar email
        sendBtn.addEventListener('click', async () => {
            const to = composeTo.value.trim().toLowerCase();
            const subject = composeSubject.value.trim();
            const body = composeBody.value.trim();
            
            if (!validateEmail(to)) {
                alert('Por favor, insira um destinat√°rio v√°lido');
                return;
            }
            
            if (!body) {
                alert('Por favor, escreva uma mensagem');
                return;
            }
            
            const email = {
                id: Date.now().toString(),
                from: currentUser,
                to,
                subject,
                body,
                date: new Date().toISOString(),
                unread: true,
                isDraft: false
            };
            
            // Tenta conectar com o destinat√°rio
            await p2pSystem.connectToUser(to);
            
            // Envia o email
            const result = await p2pSystem.sendEmail(email);
            
            if (result.success) {
                if (result.online) {
                    showNotification('‚úÖ Email enviado com sucesso!');
                } else {
                    showNotification('üì≠ Email salvo - ser√° enviado quando o destinat√°rio estiver online');
                }
            } else {
                showNotification('‚ùå Erro ao enviar email');
            }
            
            composeForm.style.display = 'none';
            emailList.style.display = 'block';
            currentFolder = 'sent';
            document.querySelector('.folder[data-folder="sent"]').click();
        });

        // Salvar rascunho
        saveDraftBtn.addEventListener('click', () => {
            const to = composeTo.value.trim().toLowerCase();
            const subject = composeSubject.value.trim();
            const body = composeBody.value.trim();
            
            if (!body) {
                alert('Por favor, escreva uma mensagem');
                return;
            }
            
            const email = {
                id: Date.now().toString(),
                from: currentUser,
                to: to || '(Rascunho)',
                subject: subject || '(Sem assunto)',
                body,
                date: new Date().toISOString(),
                unread: false,
                isDraft: true
            };
            
            EmailDB.addEmail(email);
            composeForm.style.display = 'none';
            emailList.style.display = 'block';
            currentFolder = 'drafts';
            document.querySelector('.folder[data-folder="drafts"]').click();
            
            showNotification('üìù Rascunho salvo!');
        });

        // Adicionar alguns emails de exemplo no primeiro uso
        window.addEventListener('load', () => {
            if (EmailDB.getEmails().length === 0) {
                const now = new Date();
                const exampleEmails = [
                    {
                        id: '1',
                        from: 'admin@local',
                        to: 'user@local',
                        subject: 'Bem-vindo ao Email LAN P2P',
                        body: 'Este √© um sistema de email P2P que funciona diretamente entre navegadores!\n\n‚Ä¢ Comunica√ß√£o direta entre usu√°rios\n‚Ä¢ N√£o precisa de servidor\n‚Ä¢ Funciona em qualquer rede\n\nExperimente enviar um email para outro usu√°rio!',
                        date: now.toISOString(),
                        unread: false,
                        isDraft: false
                    },
                    {
                        id: '2',
                        from: 'suporte@local',
                        to: 'user@local',
                        subject: 'Como usar o sistema P2P',
                        body: 'Dicas para usar o sistema:\n\n1. Digite seu email e clique em "Entrar"\n2. Para enviar emails, o destinat√°rio precisa estar online\n3. Emails offline s√£o enviados automaticamente quando o destinat√°rio se conectar\n4. Veja usu√°rios online na barra lateral\n\nDivirta-se! üöÄ',
                        date: new Date(now.getTime() - 3600000).toISOString(),
                        unread: true,
                        isDraft: false
                    }
                ];
                
                exampleEmails.forEach(email => EmailDB.addEmail(email));
            }
            
            // Foca no input de email
            emailInput.focus();
        });

        // Tecla Enter para login
        emailInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                loginBtn.click();
            }
        });
    </script>
</body>
    </html>
